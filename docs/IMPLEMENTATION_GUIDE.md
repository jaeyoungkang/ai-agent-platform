# AI Agent Platform - êµ¬í˜„ ê°€ì´ë“œ ë° ê¸°ìˆ  ì°¸ì¡°ì„œ

**ì‘ì„±ì¼**: 2025ë…„ 8ì›” 22ì¼  
**ëª©ì **: ê°œë°œìë¥¼ ìœ„í•œ ì‹œìŠ¤í…œ êµ¬í˜„ ê°€ì´ë“œ ë° ê¸°ìˆ ì  ì°¸ì¡° ìë£Œ

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°ë„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì‚¬ìš©ì (ì›¹ ë¸Œë¼ìš°ì €)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Google Load Balancer                          â”‚
â”‚            (Managed SSL Certificate)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                GKE Autopilot Cluster                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            AI Agent API Server                         â”‚ â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚    â”‚   FastAPI   â”‚â—„â”€â”€â–ºâ”‚      WebSocket Handler      â”‚   â”‚ â”‚
â”‚  â”‚    â”‚   Router    â”‚    â”‚                             â”‚   â”‚ â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚           â”‚                        â”‚                   â”‚ â”‚
â”‚  â”‚           â–¼                        â–¼                   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ Google OAuth2   â”‚    â”‚    User Workspace           â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ Authentication  â”‚    â”‚    Management               â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Google Cloud Services                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Firestore  â”‚  â”‚Secret Managerâ”‚  â”‚  Gmail SMTP        â”‚  â”‚
â”‚  â”‚  Database   â”‚  â”‚   API Keys   â”‚  â”‚  Email Service     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Google OAuth 2.0 êµ¬í˜„

### ì™„ì „ êµ¬í˜„ëœ OAuth í”Œë¡œìš°

#### 1. í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ (JavaScript)
```javascript
// Google Identity Services API ì‚¬ìš© (ìµœì‹  ë°©ì‹)
function initializeGoogleAuth() {
    google.accounts.id.initialize({
        client_id: "711734862853-acs8f4a8vl5nm6qmj7nncgf8fhf0dpmf.apps.googleusercontent.com",
        callback: handleCredentialResponse,
        auto_select: false,
        cancel_on_tap_outside: false
    });
    
    google.accounts.id.renderButton(
        document.getElementById("google-signin"),
        { 
            theme: "outline", 
            size: "large",
            width: 250
        }
    );
}

async function handleCredentialResponse(response) {
    const token = response.credential;
    
    // ì„œë²„ë¡œ JWT í† í° ì „ì†¡
    const authResponse = await fetch('/api/auth/google', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ token: token })
    });
    
    if (authResponse.ok) {
        const userData = await authResponse.json();
        // ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬
        localStorage.setItem('user', JSON.stringify(userData));
        window.location.href = '/assets/dashboard.html';
    }
}
```

#### 2. ì„œë²„ ì‚¬ì´ë“œ (FastAPI)
```python
from google.oauth2 import id_token
from google.auth.transport import requests
import json

GOOGLE_CLIENT_ID = "711734862853-acs8f4a8vl5nm6qmj7nncgf8fhf0dpmf.apps.googleusercontent.com"

@app.post("/api/auth/google")
async def google_auth(request: GoogleAuthRequest):
    try:
        # Google JWT í† í° ê²€ì¦
        idinfo = id_token.verify_oauth2_token(
            request.token, 
            requests.Request(), 
            GOOGLE_CLIENT_ID
        )
        
        # í† í° ìœ íš¨ì„± í™•ì¸
        if idinfo['iss'] not in ['accounts.google.com', 'https://accounts.google.com']:
            raise ValueError('ì˜ëª»ëœ issuer')
        
        # ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
        user_data = {
            "google_id": idinfo['sub'],
            "email": idinfo['email'],
            "name": idinfo['name'],
            "picture": idinfo.get('picture', ''),
            "verified_email": idinfo['email_verified']
        }
        
        # Firestoreì— ì‚¬ìš©ì ì •ë³´ ì €ì¥/ì—…ë°ì´íŠ¸
        await store_or_update_user(user_data)
        
        return {"success": True, "user": user_data}
        
    except ValueError as e:
        logger.error(f"Google Auth Error: {e}")
        raise HTTPException(status_code=401, detail="ì¸ì¦ ì‹¤íŒ¨")
```

## ğŸ“§ ì´ë©”ì¼ ì„œë¹„ìŠ¤ êµ¬í˜„

### Gmail SMTP ì„¤ì • (í˜„ì¬ êµ¬í˜„)
```python
import smtplib
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
import os

class EmailService:
    def __init__(self):
        self.smtp_server = "smtp.gmail.com"
        self.smtp_port = 587
        self.username = os.getenv('SMTP_USERNAME')  # noreply@send.app
        self.password = os.getenv('SMTP_PASSWORD')  # ì•± ë¹„ë°€ë²ˆí˜¸
        
    async def send_beta_application_email(self, user_data: dict):
        """ë² íƒ€ ì‹ ì²­ ì ‘ìˆ˜ í™•ì¸ ì´ë©”ì¼ ë°œì†¡"""
        subject = "[AI Agent Platform] ë² íƒ€ ì‹ ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤"
        
        html_content = f"""
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <title>ë² íƒ€ ì‹ ì²­ ì ‘ìˆ˜ í™•ì¸</title>
        </head>
        <body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <div style="background-color: #f8f9fa; padding: 20px; border-radius: 10px;">
                <h2 style="color: #2c3e50;">ì•ˆë…•í•˜ì„¸ìš”, {user_data['name']}ë‹˜!</h2>
                
                <p>AI Agent Platform ë² íƒ€ ì„œë¹„ìŠ¤ì— ì‹ ì²­í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>
                
                <div style="background-color: white; padding: 15px; border-radius: 5px; margin: 20px 0;">
                    <h3>ì‹ ì²­ ì •ë³´</h3>
                    <ul>
                        <li><strong>ì´ë¦„:</strong> {user_data['name']}</li>
                        <li><strong>ì´ë©”ì¼:</strong> {user_data['email']}</li>
                        <li><strong>ì‹ ì²­ì¼ì‹œ:</strong> {user_data['applied_at']}</li>
                    </ul>
                </div>
                
                <p>ë² íƒ€ ì„œë¹„ìŠ¤ ìŠ¹ì¸ì€ ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰ë˜ë©°, ìŠ¹ì¸ ì™„ë£Œì‹œ ë³„ë„ë¡œ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
                
                <hr style="margin: 30px 0;">
                <p style="color: #666; font-size: 12px;">
                    ì´ ë©”ì¼ì€ ìë™ìœ¼ë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                    ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ j@youngcompany.krë¡œ ì—°ë½í•´ ì£¼ì„¸ìš”.
                </p>
            </div>
        </body>
        </html>
        """
        
        await self._send_email(user_data['email'], subject, html_content)
    
    async def _send_email(self, to_email: str, subject: str, html_content: str):
        """ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ ì²˜ë¦¬"""
        msg = MIMEMultipart('alternative')
        msg['Subject'] = subject
        msg['From'] = self.username
        msg['To'] = to_email
        
        html_part = MIMEText(html_content, 'html', 'utf-8')
        msg.attach(html_part)
        
        try:
            with smtplib.SMTP(self.smtp_server, self.smtp_port) as server:
                server.starttls()
                server.login(self.username, self.password)
                server.send_message(msg)
            logger.info(f"Email sent successfully to {to_email}")
        except Exception as e:
            logger.error(f"Failed to send email: {e}")
            raise
```

## ğŸ”„ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬í˜„

### GitHub Actions ì›Œí¬í”Œë¡œìš°
```yaml
name: Deploy to GKE Autopilot

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

env:
  PROJECT_ID: ai-agent-platform-469401
  GKE_CLUSTER: ai-agent-cluster
  GKE_ZONE: asia-northeast3
  DEPLOYMENT_NAME: ai-agent-api
  IMAGE: api-server

jobs:
  setup-build-publish-deploy:
    name: Setup, Build, Publish, and Deploy
    runs-on: ubuntu-latest
    
    permissions:
      contents: read
      id-token: write

    steps:
    - name: Checkout
      uses: actions/checkout@v3

    - id: 'auth'
      name: 'Authenticate to Google Cloud'
      uses: 'google-github-actions/auth@v1'
      with:
        workload_identity_provider: 'projects/711734862853/locations/global/workloadIdentityPools/github-pool/providers/github-provider'
        service_account: 'github-actions-sa@ai-agent-platform-469401.iam.gserviceaccount.com'

    - name: 'Set up Cloud SDK'
      uses: 'google-github-actions/setup-gcloud@v1'

    - name: 'Configure Docker to use gcloud as a credential helper'
      run: |-
        gcloud auth configure-docker gcr.io

    - name: Build Docker image
      run: |-
        cd websocket-server
        docker build --platform linux/amd64 \
          --tag "gcr.io/$PROJECT_ID/$IMAGE:$GITHUB_SHA" \
          --tag "gcr.io/$PROJECT_ID/$IMAGE:latest" .

    - name: Push Docker image
      run: |-
        docker push "gcr.io/$PROJECT_ID/$IMAGE:$GITHUB_SHA"
        docker push "gcr.io/$PROJECT_ID/$IMAGE:latest"

    - name: Get GKE credentials
      run: |-
        gcloud container clusters get-credentials "$GKE_CLUSTER" --zone "$GKE_ZONE"

    - name: Deploy to GKE
      run: |-
        kubectl set image deployment/$DEPLOYMENT_NAME api-server=gcr.io/$PROJECT_ID/$IMAGE:$GITHUB_SHA
        kubectl rollout status deployment/$DEPLOYMENT_NAME
        kubectl get services -o wide
```

## ğŸŒ ì›¹ ë¼ìš°íŒ… êµ¬ì¡°

### FastAPI ë¼ìš°íŒ… ì„¤ì •
```python
from fastapi import FastAPI, WebSocket
from fastapi.staticfiles import StaticFiles
from fastapi.responses import FileResponse
from pathlib import Path

app = FastAPI(title="AI Agent Platform API")

# ì •ì  íŒŒì¼ ì„œë¹™ (CSS, JS ë“±ì€ /assets/ ê²½ë¡œë¡œ)
static_dir = Path(__file__).parent / "static"
if static_dir.exists():
    app.mount("/assets", StaticFiles(directory=str(static_dir)), name="assets")

@app.get("/")
async def root():
    """ë£¨íŠ¸ ê²½ë¡œì—ì„œ ë©”ì¸ í˜ì´ì§€ ì§ì ‘ ì„œë¹™"""
    index_file = static_dir / "index.html"
    if index_file.exists():
        return FileResponse(str(index_file))
    else:
        return {"message": "AI Agent Platform", "error": "index.html not found"}

# API ë¼ìš°í„°
@app.get("/api/agents")
async def get_agents():
    """ì—ì´ì „íŠ¸ ëª©ë¡ ì¡°íšŒ"""
    # Firestoreì—ì„œ ì—ì´ì „íŠ¸ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
    pass

@app.post("/api/agents")
async def create_agent(agent_data: AgentCreateRequest):
    """ìƒˆ ì—ì´ì „íŠ¸ ìƒì„±"""
    # Firestoreì— ìƒˆ ì—ì´ì „íŠ¸ ì €ì¥
    pass

# WebSocket ì—°ê²°
@app.websocket("/ws/{session_id}")
async def websocket_endpoint(websocket: WebSocket, session_id: str):
    """ì‹¤ì‹œê°„ ì±„íŒ…ì„ ìœ„í•œ WebSocket ì—°ê²°"""
    await websocket.accept()
    
    # ì‚¬ìš©ì ì„¸ì…˜ ê´€ë¦¬ ë° ë©”ì‹œì§€ ì²˜ë¦¬
    user_workspace = UserWorkspace(session_id)
    
    try:
        while True:
            # í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë©”ì‹œì§€ ìˆ˜ì‹ 
            message = await websocket.receive_text()
            
            # Claude Code ì‹œë®¬ë ˆì´ì…˜ ì‘ë‹µ ìƒì„±
            response = await user_workspace.send_to_claude(message)
            
            # ì‘ë‹µì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡
            await websocket.send_text(response)
            
    except WebSocketDisconnect:
        logger.info(f"WebSocket disconnected: {session_id}")
    finally:
        await user_workspace.cleanup()
```

## ğŸ—„ï¸ Firestore ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ì»¬ë ‰ì…˜ ìŠ¤í‚¤ë§ˆ
```javascript
// users ì»¬ë ‰ì…˜
{
  "google_id": "string",           // Google OAuth ID
  "email": "string",               // ì‚¬ìš©ì ì´ë©”ì¼
  "name": "string",                // ì‚¬ìš©ì ì´ë¦„
  "picture": "string",             // í”„ë¡œí•„ ì´ë¯¸ì§€ URL
  "verified_email": "boolean",     // ì´ë©”ì¼ ì¸ì¦ ì—¬ë¶€
  "created_at": "timestamp",       // ê°€ì…ì¼ì‹œ
  "last_login": "timestamp",       // ë§ˆì§€ë§‰ ë¡œê·¸ì¸
  "beta_approved": "boolean"       // ë² íƒ€ ìŠ¹ì¸ ì—¬ë¶€
}

// agents ì»¬ë ‰ì…˜
{
  "name": "string",                // ì—ì´ì „íŠ¸ ì´ë¦„
  "description": "string",         // ì—ì´ì „íŠ¸ ì„¤ëª…
  "owner_id": "string",           // ì†Œìœ ì Google ID
  "created_at": "timestamp",       // ìƒì„±ì¼ì‹œ
  "updated_at": "timestamp",       // ìˆ˜ì •ì¼ì‹œ
  "config": {                      // ì—ì´ì „íŠ¸ ì„¤ì •
    "model": "string",
    "temperature": "number",
    "max_tokens": "number"
  }
}

// sessions ì»¬ë ‰ì…˜
{
  "session_id": "string",          // ì„¸ì…˜ ID
  "user_id": "string",            // ì‚¬ìš©ì Google ID
  "agent_id": "string",           // ì—°ê²°ëœ ì—ì´ì „íŠ¸ ID
  "created_at": "timestamp",       // ì„¸ì…˜ ì‹œì‘ì‹œê°„
  "last_activity": "timestamp",    // ë§ˆì§€ë§‰ í™œë™ì‹œê°„
  "status": "string"              // active, inactive, closed
}
```

## ğŸ”’ ë³´ì•ˆ ì„¤ì •

### Kubernetes ë³´ì•ˆ êµ¬ì„±
```yaml
# k8s/security/network-policy.yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: ai-agent-api-netpol
spec:
  podSelector:
    matchLabels:
      app: ai-agent-api
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: gke-system
    ports:
    - protocol: TCP
      port: 8000
  egress:
  - to: []
    ports:
    - protocol: TCP
      port: 443  # HTTPS ì™¸ë¶€ API í˜¸ì¶œ
    - protocol: TCP
      port: 587  # SMTP
    - protocol: TCP
      port: 53   # DNS
    - protocol: UDP
      port: 53   # DNS
```

### Secret Management
```yaml
# k8s/secrets/app-secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
type: Opaque
stringData:
  GOOGLE_CLIENT_ID: "711734862853-acs8f4a8vl5nm6qmj7nncgf8fhf0dpmf.apps.googleusercontent.com"
  SMTP_USERNAME: "noreply@send.app"
  SMTP_PASSWORD: "${GMAIL_APP_PASSWORD}"
  FIRESTORE_CREDENTIALS: "${FIRESTORE_SERVICE_ACCOUNT_JSON}"
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë° ëª¨ë‹ˆí„°ë§

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash
# test-endpoints.sh

BASE_URL="https://oh-my-agent.info"

echo "=== API Endpoint Tests ==="

# Health check
echo "Testing health endpoint..."
curl -f "${BASE_URL}/api/health" || echo "âŒ Health check failed"

# Static assets
echo "Testing static assets..."
curl -f "${BASE_URL}/assets/styles.css" > /dev/null && echo "âœ… CSS loading OK" || echo "âŒ CSS failed"
curl -f "${BASE_URL}/assets/common.js" > /dev/null && echo "âœ… JS loading OK" || echo "âŒ JS failed"

# Main page
echo "Testing main page..."
curl -f "${BASE_URL}/" > /dev/null && echo "âœ… Main page OK" || echo "âŒ Main page failed"

echo "=== All tests completed ==="
```

---

## ğŸ“‹ ê°œë°œì ì°¸ê³ ì‚¬í•­

### ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •
```bash
# 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export CLOUDBUILD_MOCK=true
export PORT=8001
export GOOGLE_CLIENT_ID="your-client-id"
export SMTP_USERNAME="j@yyoungcompany.kr"
export SMTP_PASSWORD="your-app-password"

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
cd websocket-server
pip install -r requirements.txt

# 3. ë¡œì»¬ ì„œë²„ ì‹¤í–‰
python main.py

# 4. ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†
open http://localhost:8000
```

### ë””ë²„ê¹… íŒ
1. **OAuth ë¬¸ì œ**: ê°œë°œì ë„êµ¬ ì½˜ì†”ì—ì„œ JavaScript ì˜¤ë¥˜ í™•ì¸
2. **WebSocket ì—°ê²°**: ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ WS ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§
3. **ì´ë©”ì¼ ë°œì†¡**: ì„œë²„ ë¡œê·¸ì—ì„œ SMTP ì—°ê²° ìƒíƒœ í™•ì¸
4. **Firestore**: GCP ì½˜ì†”ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì§ì ‘ ì‹¤í–‰

### í™•ì¥ ê°€ì´ë“œ
1. **ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€**: FastAPI ë¼ìš°í„° íŒ¨í„´ ì‚¬ìš©
2. **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½**: Firestore ì»¬ë ‰ì…˜ êµ¬ì¡° ì—…ë°ì´íŠ¸
3. **ì¸ì¦ í™•ì¥**: ì¶”ê°€ OAuth ì œê³µì ì—°ë™ ê°€ëŠ¥

ì´ ê°€ì´ë“œëŠ” í˜„ì¬ ìš´ì˜ ì¤‘ì¸ ì‹œìŠ¤í…œì˜ ì‹¤ì œ êµ¬í˜„ì‚¬í•­ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.