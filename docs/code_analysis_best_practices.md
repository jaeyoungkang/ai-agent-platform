# 코드 분석 및 기존 시스템 활용 가이드
## AI 개발 어시스턴트를 위한 효과적인 지시 방법

### 📋 문제 인식

기존 코드를 충분히 고려하지 않고 새로운 방식을 제안하는 문제가 발생했습니다.

**사례**: workspace.html의 기존 `session=UUID` 방식을 무시하고 `mode=agent-create` 방식을 제안

---

## 🤔 기존 코드를 고려하지 않는 이유 분석

### 1. **제한적인 코드 탐색**
- 파일을 한 번만 읽고 전체 구조를 충분히 파악하지 않음
- 기존 로직(`parseUrlParams`, `sessionId` 처리)을 대충 훑어봤지만 깊이 분석하지 않음
- URL 파라미터 처리 방식을 제대로 이해하지 않고 새로운 방식 제안

### 2. **추상적 사고 우선**
- 개념적 접근("에이전트 생성 모드")에만 집중
- 기존 구현체의 실제 동작 방식보다 이상적인 설계에 치중
- 주관적 판단으로 "더 명확해 보이는" 방식 선호

### 3. **맥락 누락**
- 기존 시스템이 특정 방식을 사용하는 이유 이해 부족
- 관련 시스템들(세션 관리, 상태 복원, WebSocket 연결) 간의 연관성을 놓침
- 전체적인 아키텍처 맥락에서 벗어난 제안

---

## 📋 효과적인 지시 방법

### ❌ 비효과적인 지시

```
"workspace.html을 활용해서 구현해"
"에이전트 생성 기능을 추가해"
"기존 코드를 참고해서 만들어"
```

**문제점**: 너무 추상적이고 구체적인 분석 방향 제시 없음

### ✅ 효과적인 지시 패턴

#### 1. **기존 코드 분석 요구**
```
"먼저 workspace.html의 세션 관리 로직을 상세히 분석하고,
기존 WebSocket 연결 방식을 파악한 후 제안해"
```

#### 2. **특정 함수/로직 참조**
```
"parseUrlParams(), initializeWorkspace(), connectWebSocket() 
함수들이 어떻게 연동되는지 분석 후 수정 방안 제시해"
```

#### 3. **호환성 명시**
```
"기존 세션 관리 시스템과 100% 호환되면서 
최소한의 수정으로 구현 가능한 방법 찾아줘"
```

#### 4. **제약 조건 명시**
```
"새로운 파일 생성 금지, 기존 API 엔드포인트 변경 금지, 
기존 URL 구조 최대한 유지 조건에서 제안해"
```

#### 5. **단계별 분석 요구**
```
"1단계: 기존 URL 파라미터 처리 방식 분석
2단계: 세션 관리 로직 파악  
3단계: 호환 가능한 수정 방안 제시"
```

---

## 🎯 구체적인 지시 예시

### 예시 1: 기능 추가 시
```
"workspace.html의 기존 URL 파라미터 처리 방식(session=UUID)과 
parseUrlParams() 함수를 먼저 분석하고, 이 구조를 최대한 유지하면서 
에이전트 생성 기능을 추가하는 방안을 제안해"
```

### 예시 2: 시스템 수정 시  
```
"main.py의 기존 WebSocket 핸들러 구조를 분석하고,
현재 사용 중인 세션 관리 방식을 파악한 후,
기존 로직을 최대한 활용할 수 있는 수정 방안 제시해"
```

### 예시 3: 통합 작업 시
```
"dashboard.html에서 workspace.html로 이동하는 기존 방식을 분석하고,
현재 사용 중인 파라미터 전달 방식을 그대로 활용해서
에이전트 생성 플로우를 통합하는 방법 제안해"
```

---

## 🔍 권장 작업 프로세스

### 단계별 접근법

#### 1단계: 현상 분석
- 관련 파일들을 모두 읽고 전체 구조 파악
- 기존 함수들의 역할과 연동 방식 이해
- URL 파라미터, API 엔드포인트, 데이터 플로우 매핑

#### 2단계: 의도 파악  
- 왜 이런 방식으로 구현되었는지 이유 분석
- 기존 설계의 장점과 제약사항 파악
- 다른 시스템과의 의존성 관계 확인

#### 3단계: 호환성 우선 설계
- 기존 구조를 최대한 유지하는 방향으로 제안
- 새로운 기능을 기존 패턴에 맞춰 통합
- 최소 변경으로 최대 효과를 낼 수 있는 방안 탐색

#### 4단계: 검증 및 보완
- 기존 기능에 영향을 주지 않는지 확인  
- 제안한 방식이 전체 시스템과 일관성을 유지하는지 검토
- 필요시 대안 방안도 함께 제시

---

## 💡 핵심 원칙

### 1. **분석 우선, 제안 후순**
새로운 아이디어를 제시하기 전에 기존 코드를 충분히 분석

### 2. **호환성 최우선**  
기존 시스템과의 호환성을 가장 중요한 기준으로 설정

### 3. **최소 변경 원칙**
동일한 결과를 얻을 수 있다면 변경 범위를 최소화

### 4. **맥락 이해**
개별 코드가 아닌 전체 시스템 맥락에서 이해

### 5. **의도 파악**
현재 구현 방식이 선택된 이유와 배경 이해

---

## ⚠️ 주의사항

### 피해야 할 실수들

1. **성급한 일반화**: 일부 코드만 보고 전체 구조 추측
2. **이상적 설계 집착**: 현실적 제약보다 완벽한 설계 우선시  
3. **맥락 무시**: 개별 기능만 고려하고 전체 시스템 연관성 무시
4. **호환성 경시**: 새로운 방식이 더 좋다고 기존 방식 무시

### 확인해야 할 체크리스트

- [ ] 관련된 모든 파일을 읽고 분석했는가?
- [ ] 기존 함수들의 역할과 연동 방식을 이해했는가?
- [ ] 제안한 방식이 기존 시스템과 호환되는가?
- [ ] 최소한의 변경으로 목표를 달성할 수 있는가?
- [ ] 다른 기능에 부작용을 주지 않는가?

---

*작성일: 2024년 1월*  
*목적: AI 개발 어시스턴트의 효과적인 기존 코드 활용을 위한 가이드*